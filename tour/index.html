<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="An uncensorable funding platform for radical creators and unstoppable service providers.">

    <title>Telr Exchange — Platform Tour</title>

    <link rel="icon" href="./favicon.ico" type="image/x-icon"/>

	<link rel="stylesheet" href="./dist/reset.css">
	<link rel="stylesheet" href="./dist/reveal.css">
	<link rel="stylesheet" href="./dist/theme/beige.css" id="theme">

	<!-- Theme used for syntax highlighted code -->
	<link rel="stylesheet" href="./plugin/highlight/monokai.css" id="highlight-theme">

    <style>
    strong em {
        /* font-size: 1.2em; */
        /* color: rgba(200, 126, 26, 1.0); */
    }
    h4.text-red {
        color: rgba(255, 0, 0, 0.8);
    }
    img.donation-qrcode {
        width: 300px;
        height: 300px;
    }
    a.donation-address {
        font-size: 0.7em;
        color: rgba(255, 0, 0, 1.0);
    }
    ul.checked {
        margin-left: 0;
        list-style-type: none;
    }
    </style>

    <!-- Open graph -->
    <meta property="og:url" content="https://telr.exchange" />
    <meta property="og:title" content="Causes Cash">
    <meta property="og:type" content="website">
    <meta property="og:description" content="An uncensorable funding platform for radical creators and unstoppable service providers.">
    <meta property="og:image" content="https://telr.exchange/poster.jpg?1580211230">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Causes Cash">
    <meta name="twitter:description" content="An uncensorable funding platform for radical creators and unstoppable service providers.">
    <meta name="twitter:image" content="https://telr.exchange/poster.jpg?1580211230">
</head>

<body>

<div class="reveal">
	<div class="slides">
        <section>
			<a href="https://telr.exchange">
				<img src="./img/banner.png" alt="Cause Cash logo" style="height: 180px; margin: 0 auto 4rem auto; background: transparent;" class="demo-logo">
			</a>

            <h3>Free and uncensorable cross-chain atomic swaps of your favorite coins and tokens</h3>

            <p>
				<small>created with ❤️ by <a href="https://modenero.com" target="_blank">Modenero</a></small>
			</p>
		</section>

        <section>
            <h3>Mission Statement</h3>

            <p>
                To be part of the solution offering permissionless financial freedom for every man, woman and child.

            </p>
        </section>

        <!-- <section data-background-color="rgba(70, 70, 255, 0.4)"> -->
        <section>
            <h2>Telr Exchange is keeping it <strong><em>100!</em></strong></h2>

            <p class="fragment fade-up"><strong><em>100%</em></strong> Uncensorable</p>
            <p class="fragment fade-up"><strong><em>100%</em></strong> Transparent</p>
            <p class="fragment fade-up"><strong><em>100%</em></strong> FREE Forever</p>

        </section>

        <section>
            <h2>Donate</h2>

            <p>
                Contributors to the <strong><em>commons need your support</em></strong> for their work.
                Building <strong><em>FREE software</em></strong> and spreading <strong><em>FREE knowledge</em></strong> takes time and costs money, not only for the initial work, but also to maintain it over time.
            </p>

            <hr />

            <p>
                Causes Cash helps ensure a <strong><em>stable income for creators</em></strong>, allowing them to keep doing great work.
            </p>

            <p><small>
                learn how it all works below...
            </small></p>
        </section>

        <section>
            <h2>Choose Your Campaign</h2>

            <p>
                Regardless of your current or future needs, Causes Cash allows you maximum flexibility with <strong><em>3 distinct funding options</em></strong>:
            </p>

            <ul class="checked">
                <li>✓ Direct Cash</li>
                <li>✓ Community Pledge</li>
                <li>✓ Daily Payouts</li>
            </ul>
        </section>

        <section>
            <h2>Direct Cash</h2>

            <p>
                Supporters can <strong><em>safely send donations</em></strong> directly to your <strong><em>publicly registered</em></strong> campaign addresses.
            </p>

            <table>
                <tbody>
                    <tr>
                        <td align="center" width="33%">
                            <a href="https://explorer.bitcoin.com/bch/address/bitcoincash:qrz4zlgjsqu0gu9xaayrrrlrttyv85xxzslp43veu6" target="_blank" class="donation-address">
                                General Fund
                            </a>
                            <img class="donation-qrcode" src="./img/donation-qrcode.png" />
                        </td>
                        <td align="center" width="33%">
                            <a href="https://explorer.bitcoin.com/bch/address/bitcoincash:qrz4zlgjsqu0gu9xaayrrrlrttyv85xxzslp43veu6" target="_blank" class="donation-address">
                                Social Events
                            </a>
                            <img class="donation-qrcode" src="./img/donation-qrcode.png" />
                        </td>
                        <td align="center" width="33%">
                            <a href="https://explorer.bitcoin.com/bch/address/bitcoincash:qrz4zlgjsqu0gu9xaayrrrlrttyv85xxzslp43veu6" target="_blank" class="donation-address">
                                Content Creation
                            </a>
                            <img class="donation-qrcode" src="./img/donation-qrcode.png" />
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section>
            <h2>Community Pledge</h2>

            <strong><em>There is safety in numbers!</em></strong>

            <p>
                Using an <em><strong>Assurance Contract</strong> (aka Flipstarter)</em> allows a group of your supporters to contribute to a fixed <strong>ALL</strong> or <strong>NOTHING</strong> funding goal.
            </p>
        </section>

        <section>
            <h2>Daily Payouts</h2>

            <p>
                Finally! Creators have <strong><em>Patreon-style funding</em></strong> running on an uncensorable blockchain platform.
            </p>

            <hr />

            <p>
                Sponsors always stay 100% in control!
                Set individual <strong><em>monthly budgets</em></strong> for your favorite campaigns, then let Causes Cash manage the <strong><em>daily payouts</em></strong> for you.
            </p>

            <p><small>
                Learn more about the innovative <a href="https://docs.causes.cash/payouts.html#mecenas-oracle" target="_blank"><strong>Mecenas Oracle</strong></a> contract.
            </small></p>
        </section>

        <section>
            <h2>CashScript (BCH) Contract</h2>

            <pre><code data-trim data-noescape data-line-numbers>
pragma cashscript ^0.5.0;

/*******************************************************************************
 *
 * Copyright (c) 2020 Modenero Corp
 * Released under the MIT License.
 *
 * Telr Exchange
 *
 * Version 20.11.5
 *
 * https://modenero.com
 * support@modenero.com
 *
 * This contract enforces a fiat-based market price for daily payouts to the
 * contract's receipient.
 *
 * maker      : the initiator of the swap
 * taker      : the counterparty of the swap
 * secretHash : a SHA-256 hash of a 32-byte secret, generated by the maker
 * expiration : block height that will invalidate this contract
 *
 * NOTE: A minimum valid block is required to ensure the oracle's price
 *       signatures will invalidate each day, after the payout is made
 *       and a new UTXO is generated.
 *
 * NOTE: Although the pledged budget is set as a monthly value by the
 *       contract's funder, payouts are made daily to contract's receipient.
 *
 *       eg. February payouts are 1/28 or 1/29 the monthly pledge amount
 *           June payouts are 1/30 the monthly pledge amount
 *           December payouts are 1/31 the monthly pledge amount
 */
contract TelrExchange(
    bytes20 maker,
    bytes20 taker,
    bytes32 secretHash,
    int expiration,
) {
    /**
     * Payout
     *
     * The `taker` of the swap can execute this method as soon as the `secret`,
     * generated by the `maker`, is revealed within the cross-chain transaction.
     */
    function payout(pubkey _pk, sig _sig, bytes32 _secret) {
        /* Validate transaction signature. */
        require(checkSig(_sig, _pk));

        /* Validate taker's public key. */
        require(hash160(_pk) == taker);

        /* Validate secret (preimage) with hash. */
        // NOTE: This is revealed in the maker's cross-chain transaction.
        require(sha256(_secret) == secretHash);
    }

    /**
     * Reclaim
     *
     * The `maker` remains 100% in control over their funds. However, a (CLTV)
     * time lock is enforced throughout the agreed upon escrow period
     * (eg. 2 hours | 12 blocks). Once the escrow period has expired, the
     * swap `maker` may reclaim their assets at any time.
     */
    function reclaim(pubkey _pk, sig _sig) {
        /* Validate transaction signature. */
        require(checkSig(_sig, _pk));

        /* Validate maker's public key. */
        require(hash160(_pk) == maker);

        /* Validate swap expiration (block height). */
        require(tx.time >= expiration);
    }

}
            </code></pre>
        </section>

        <section>
            <h2>Solidity (ETH) Contract</h2>

            <pre><code data-trim data-noescape data-line-numbers>
pragma solidity ^0.5.17;

/*******************************************************************************
 *
 * Copyright (c) 2020 Modenero Corp.
 * Released under the MIT License.
 *
 * Telr Exchange - A 100% non-custodial...
 *
 * Version 20.11.5
 *
 * https://modenero.com
 * support@modenero.com
 */


/*******************************************************************************
 *
 * SafeMath
 */
library SafeMath {
    function add(uint a, uint b) internal pure returns (uint c) {
        c = a + b;
        require(c >= a);
    }
    function sub(uint a, uint b) internal pure returns (uint c) {
        require(b <= a);
        c = a - b;
    }
    function mul(uint a, uint b) internal pure returns (uint c) {
        c = a * b;
        require(a == 0 || c / a == b);
    }
    function div(uint a, uint b) internal pure returns (uint c) {
        require(b > 0);
        c = a / b;
    }
}


/*******************************************************************************
 *
 * ECRecovery
 *
 * Contract function to validate signature of pre-approved token transfers.
 * (borrowed from LavaWallet)
 */
contract ECRecovery {
    function recover(bytes32 hash, bytes memory sig) public pure returns (address);
}


/*******************************************************************************
 *
 * ERC Token Standard #20 Interface
 * https://github.com/ethereum/EIPs/blob/master/EIPS/eip-20-token-standard.md
 */
contract ERC20Interface {
    function totalSupply() public view returns (uint);
    function balanceOf(address tokenOwner) public view returns (uint balance);
    function allowance(address tokenOwner, address spender) public view returns (uint remaining);
    function transfer(address to, uint tokens) public returns (bool success);
    function approve(address spender, uint tokens) public returns (bool success);
    function transferFrom(address from, address to, uint tokens) public returns (bool success);

    event Transfer(address indexed from, address indexed to, uint tokens);
    event Approval(address indexed tokenOwner, address indexed spender, uint tokens);
}


/*******************************************************************************
 *
 * ApproveAndCallFallBack
 *
 * Contract function to receive approval and execute function in one call
 * (borrowed from MiniMeToken)
 */
contract ApproveAndCallFallBack {
    function approveAndCall(address spender, uint tokens, bytes memory data) public;
    function receiveApproval(address from, uint256 tokens, address token, bytes memory data) public;
}


/*******************************************************************************
 *
 * Owned contract
 */
contract Owned {
    address public owner;
    address public newOwner;

    event OwnershipTransferred(address indexed _from, address indexed _to);

    constructor() public {
        owner = msg.sender;
    }

    modifier onlyOwner {
        require(msg.sender == owner);
        _;
    }

    function transferOwnership(address _newOwner) public onlyOwner {
        newOwner = _newOwner;
    }

    function acceptOwnership() public {
        require(msg.sender == newOwner);

        emit OwnershipTransferred(owner, newOwner);

        owner = newOwner;

        newOwner = address(0);
    }
}


/*******************************************************************************
 *
 * ModeneroDb Interface
 */
contract ModeneroDbInterface {
    /* Interface getters. */
    function getAddress(bytes32 _key) external view returns (address);
    function getBool(bytes32 _key)    external view returns (bool);
    function getBytes(bytes32 _key)   external view returns (bytes memory);
    function getInt(bytes32 _key)     external view returns (int);
    function getString(bytes32 _key)  external view returns (string memory);
    function getUint(bytes32 _key)    external view returns (uint);

    /* Interface setters. */
    function setAddress(bytes32 _key, address _value) external;
    function setBool(bytes32 _key, bool _value) external;
    function setBytes(bytes32 _key, bytes calldata _value) external;
    function setInt(bytes32 _key, int _value) external;
    function setString(bytes32 _key, string calldata _value) external;
    function setUint(bytes32 _key, uint _value) external;

    /* Interface deletes. */
    function deleteAddress(bytes32 _key) external;
    function deleteBool(bytes32 _key) external;
    function deleteBytes(bytes32 _key) external;
    function deleteInt(bytes32 _key) external;
    function deleteString(bytes32 _key) external;
    function deleteUint(bytes32 _key) external;
}


/*******************************************************************************
 *
 * @notice Telr Exchange
 *
 * @dev Developer details.
 */
contract TelrExchange is Owned {
    using SafeMath for uint;

    /* Initialize predecessor contract. */
    address private _predecessor;

    /* Initialize successor contract. */
    address private _successor;

    /* Initialize revision number. */
    uint private _revision;

    /* Initialize Modenero Db contract. */
    ModeneroDbInterface private _modeneroDb;

    /**
     * Set Namespace
     *
     * Provides a "unique" name for generating "unique" data identifiers,
     * most commonly used as database "key-value" keys.
     *
     * NOTE: Use of `namespace` is REQUIRED when generating ANY & ALL
     *       ModeneroDb keys; in order to prevent ANY accidental or
     *       malicious SQL-injection vulnerabilities / attacks.
     */
    string private _namespace = 'telrexchange';

    /* Initialize (token) balances. */
    mapping(address => mapping(address => uint)) private _balances;

    /* Initialize (escrow) balances. */
    mapping(address => mapping(address => mapping(address => uint))) private _escrows;

    /* Initialize (escrow) expirations. */
    mapping(address => mapping(address => mapping(address => uint))) private _expirations;

    /* Initialize maker. */
    address payable maker;

    /* Initialize taker. */
    address payable taker;

    /* Initialize secret hash. */
    bytes32 secretHash;

    event Created(
        address indexed primary,
        address secondary,
        bytes data
    );

    event Completed(
        address indexed primary,
        address secondary,
        bytes data
    );

    event Escrowed(
        address indexed primary,
        address secondary,
        bytes data
    );

    /***************************************************************************
     *
     * Constructor
     */
    constructor() public {
        /* Initialize ModeneroDb (eternal) storage database contract. */
        // NOTE We hard-code the address here, since it should never change.
        // _modeneroDb = ModeneroDbInterface(0xE865Fe1A1A3b342bF0E2fcB11fF4E3BCe58263af);
        // _modeneroDb = ModeneroDbInterface(0x4C2f68bCdEEB88764b1031eC330aD4DF8d6F64D6); // ROPSTEN
        _modeneroDb = ModeneroDbInterface(0x3e246C5038287DEeC6082B95b5741c147A3f49b3); // KOVAN

        /* Initialize (aname) hash. */
        bytes32 hash = keccak256(abi.encodePacked('aname.', _namespace));

        /* Set predecessor address. */
        _predecessor = _modeneroDb.getAddress(hash);

        /* Verify predecessor address. */
        if (_predecessor != address(0x0)) {
            /* Make address payable. */
            address payable predecessor = address(uint160(_predecessor));

            /* Retrieve the last revision number (if available). */
            uint lastRevision = TelrExchange(predecessor).getRevision();

            /* Set (current) revision number. */
            _revision = lastRevision + 1;
        }
    }

    /**
     * @dev Only allow access to an authorized Modenero administrator.
     */
    modifier onlyAuthByModenero() {
        /* Verify write access is only permitted to authorized accounts. */
        require(_modeneroDb.getBool(keccak256(
            abi.encodePacked(msg.sender, '.has.auth.for.', _namespace))) == true);

        _;      // function code is inserted here
    }


    /**
     * Coin Deposit
     */
    function coinDeposit (
        bytes32 _secretHash,
        // uint256 _expiration,
        address payable _taker
    ) external payable {
        /* Set maker. */
        maker = msg.sender;

        /* Set taker. */
        taker = _taker;

        /* Set secret hash. */
        secretHash = _secretHash;

        /* Set expiration. */
        // expiration = _expiration;
    }

    /**
     * Token Deposit
     */
    function tokenDeposit (
        bytes32 _secretHash,
        // uint256 _expiration,
        address payable _taker
    ) external payable {
        /* Set maker. */
        maker = msg.sender;

        /* Set taker. */
        taker = _taker;

        /* Set secret hash. */
        secretHash = _secretHash;

        /* Set expiration. */
        // expiration = _expiration;
    }

    /**
     * Escrow
     */
    function escrow (
        bytes32 _secretHash,
        address _taker,
        bytes32 _token,
        int _amount
    ) external {
        //
    }

    /**
     * Payout
     *
     * NOTE: SHA-256 is available in CashScript.
     *       (source: https://cashscript.org/docs/language/functions/#sha256)
     */
    function payout (bytes32 _secret) external {
        require(sha256(abi.encodePacked(_secret)) == secretHash);

        // require(now <= expiration);

        taker.transfer(address(this).balance);
    }

    /**
     * Reclaim
     *
     * In the event that the swap expires (reaches a specified block height),
     * the seller can request a 100% refund.
     */
    function reclaim () public {
        /* Verify expiration. */
        // require(now > expiration);

        maker.transfer(address(this).balance);
    }


    /***************************************************************************
     *
     * GETTERS
     *
     */

    function getEscrow() external view returns (uint) {
        // return ;
    }

    /**
     * Get Revision (Number)
     */
    function getRevision() public view returns (uint) {
        return _revision;
    }

    /**
     * Get Predecessor (Address)
     */
    function getPredecessor() public view returns (address) {
        return _predecessor;
    }

    /**
     * Get Successor (Address)
     */
    function getSuccessor() public view returns (address) {
        return _successor;
    }


    /***************************************************************************
     *
     * SETTERS
     *
     */

    /**
     * Set Successor
     *
     * This is the contract address that replaced this current instnace.
     */
    function setSuccessor(
        address _newSuccessor
    ) onlyAuthByModenero external returns (bool success) {
        /* Set successor contract. */
        _successor = _newSuccessor;

        /* Return success. */
        return true;
    }


    /***************************************************************************
     *
     * INTERFACES
     *
     */

    /**
     * Supports Interface (EIP-165)
     *
     * (see: https://github.com/ethereum/EIPs/blob/master/EIPS/eip-165.md)
     *
     * NOTE: Must support the following conditions:
     *       1. (true) when interfaceID is 0x01ffc9a7 (EIP165 interface)
     *       2. (false) when interfaceID is 0xffffffff
     *       3. (true) for any other interfaceID this contract implements
     *       4. (false) for any other interfaceID
     */
    function supportsInterface(
        bytes4 _interfaceID
    ) external pure returns (bool) {
        /* Initialize constants. */
        bytes4 InvalidId = 0xffffffff;
        bytes4 ERC165Id = 0x01ffc9a7;

        /* Validate condition #2. */
        if (_interfaceID == InvalidId) {
            return false;
        }

        /* Validate condition #1. */
        if (_interfaceID == ERC165Id) {
            return true;
        }

        // TODO Add additional interfaces here.

        /* Return false (for condition #4). */
        return false;
    }

    /**
     * ECRecovery Interface
     */
    function _ecRecovery() private view returns (
        ECRecovery ecrecovery
    ) {
        /* Initialize hash. */
        bytes32 hash = keccak256('aname.ecrecovery');

        /* Retrieve value from Modenero Db. */
        address aname = _modeneroDb.getAddress(hash);

        /* Initialize interface. */
        ecrecovery = ECRecovery(aname);
    }


    /***************************************************************************
     *
     * UTILITIES
     *
     */

    /**
     * Is (Owner) Contract
     *
     * Tests if a specified account / address is a contract.
     */
    function _ownerIsContract(
        address _owner
    ) private view returns (bool isContract) {
        /* Initialize code length. */
        uint codeLength;

        /* Run assembly. */
        assembly {
            /* Retrieve the size of the code on target address. */
            codeLength := extcodesize(_owner)
        }

        /* Set test result. */
        isContract = (codeLength > 0);
    }

    /**
     * Bytes-to-Address
     *
     * Converts bytes into type address.
     */
    function _bytesToAddress(
        bytes memory _address
    ) private pure returns (address) {
        uint160 m = 0;
        uint160 b = 0;

        for (uint8 i = 0; i < 20; i++) {
            m *= 256;
            // b = uint160(_address[i]); // NOTE: This line broke in v0.5.0
            b = uint160(uint8(_address[i])); // NOTE: This HAS NOT been tested yet.
            m += (b);
        }

        return address(m);
    }

    /**
     * Convert Bytes to Bytes32
     */
    function _bytesToBytes32(
        bytes memory _data,
        uint _offset
    ) private pure returns (bytes32 result) {
        /* Loop through each byte. */
        for (uint i = 0; i < 32; i++) {
            /* Shift bytes onto result. */
            result |= bytes32(_data[i + _offset] & 0xFF) >> (i * 8);
        }
    }

    /**
     * Convert Bytes32 to Bytes
     *
     * NOTE: Since solidity v0.4.22, you can use `abi.encodePacked()` for this,
     *       which returns bytes. (https://ethereum.stackexchange.com/a/55963)
     */
    function _bytes32ToBytes(
        bytes32 _data
    ) private pure returns (bytes memory result) {
        /* Pack the data. */
        return abi.encodePacked(_data);
    }
}
            </code></pre>

            <small>
                Etherscan verification ➧
                <a href="https://kovan.etherscan.io/address/0xef54ae01d55adecac852cbe3e6f16b0d1bf38de0#code" target="_blank">
                0xef54ae01d55adecac852cbe3e6f16b0d1bf38de0</a>
            </small>
        </section>

        <section>
            <h2>Sponsorship Levels</h2>

            <table>
                <thead>
                    <tr>
                        <th>Level</th>
                        <th align="center">BCH/mo</th>
                        <th align="center">USD/mo</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Supporter</td>
                        <td align="center">0.004</td>
                        <td align="center">$1</td>
                    </tr>
                    <tr>
                        <td>Backer</td>
                        <td align="center">0.04</td>
                        <td align="center">$10</td>
                    </tr>
                    <tr>
                        <td>Fan</td>
                        <td align="center">0.1</td>
                        <td align="center">$25</td>
                    </tr>
                    <tr>
                        <td>Advocate</td>
                        <td align="center">0.2</td>
                        <td align="center">$50</td>
                    </tr>
                    <tr>
                        <td>Patron</td>
                        <td align="center">0.4</td>
                        <td align="center">$100</td>
                    </tr>
                </tbody>
            </table>

            <small><em>
                * BCH values are estimates, based on a $250 market rate
            </em></small>

            <p><small>
                view more sponsorship levels below...
            </small></p>
        </section>

        <section>
			<a href="https://telr.exchange">
				<img src="./img/banner.png" alt="Telr Exchange logo" style="height: 180px; margin: 0 auto 4rem auto; background: transparent;" class="demo-logo">
			</a>

            <h3>See How Your ❤️ Causes Cash<br />Start discovering today!</h3>

            <p>
				<small>please visit <a href="https://telr.exchange" target="_blank"><strong>telr.exchange</strong></a> to begin your journey</small>
			</p>
		</section>
	</div>
</div>

<script src="./dist/reveal.js"></script>
<script src="./plugin/notes/notes.js"></script>
<script src="./plugin/markdown/markdown.js"></script>
<script src="./plugin/highlight/highlight.js"></script>

<script>
// More info about initialization & config:
// - https://revealjs.com/initialization/
// - https://revealjs.com/config/
Reveal.initialize({
	hash: true,

	// Learn about plugins: https://revealjs.com/plugins/
	plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
});
</script>

</body>
</html>
